{"ast":null,"code":"import { LOGIN_ENDPOINT, REFRESH_ENDPOINT, REGISTER_ENDPOINT } from './auth.constants';\nimport request from './api.request';\nclass AuthService {\n  constructor() {\n    this.login = this.login.bind(this);\n  }\n  async login(username, password) {\n    try {\n      const response = await request({\n        url: LOGIN_ENDPOINT,\n        method: 'POST',\n        data: {\n          username,\n          password\n        }\n      });\n      if (response.data.access) {\n        return this.setToken(response);\n      }\n    } catch (error) {\n      return error.response;\n    }\n  }\n  logout() {\n    localStorage.removeItem('user');\n  }\n  async register({\n    username,\n    email,\n    password,\n    firstName,\n    lastName\n  }) {\n    try {\n      await request({\n        url: REGISTER_ENDPOINT,\n        method: 'POST',\n        data: {\n          username,\n          email,\n          password,\n          first_name: firstName,\n          last_name: lastName\n        }\n      });\n      await this.login(username, password);\n    } catch (error) {\n      return error.response;\n    }\n  }\n  setToken(response) {\n    localStorage.setItem('user', JSON.stringify(response.data));\n    return response.data;\n  }\n  async refreshToken() {\n    try {\n      const user = JSON.parse(localStorage.getItem('user'));\n      if (user.refresh) {\n        const response = await request({\n          url: REFRESH_ENDPOINT,\n          method: 'POST',\n          data: {\n            refresh: user.refresh\n          }\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response;\n    }\n  }\n}\nexport default new AuthService();","map":{"version":3,"names":["LOGIN_ENDPOINT","REFRESH_ENDPOINT","REGISTER_ENDPOINT","request","AuthService","constructor","login","bind","username","password","response","url","method","data","access","setToken","error","logout","localStorage","removeItem","register","email","firstName","lastName","first_name","last_name","setItem","JSON","stringify","refreshToken","user","parse","getItem","refresh"],"sources":["/workspace/golf-app-frontend/frontend/src/services/auth.service.js"],"sourcesContent":["import {\n    LOGIN_ENDPOINT,\n    REFRESH_ENDPOINT,\n    REGISTER_ENDPOINT,\n  } from './auth.constants';\n  \n  import request from './api.request';\n  \n  class AuthService {\n    constructor() {\n      this.login = this.login.bind(this);\n    }\n  \n    async login(username, password) {\n      try {\n        const response = await request({\n          url: LOGIN_ENDPOINT,\n          method: 'POST',\n          data: {\n            username,\n            password,\n          },\n        });\n  \n        if (response.data.access) {\n          return this.setToken(response);\n        }\n      } catch (error) {\n        return error.response;\n      }\n    }\n  \n    logout() {\n      localStorage.removeItem('user');\n    }\n  \n    async register({\n      username,\n      email,\n      password,\n      firstName,\n      lastName,\n    }) {\n      try {\n        await request({\n          url: REGISTER_ENDPOINT,\n          method: 'POST',\n          data: {\n            username,\n            email,\n            password,\n            first_name: firstName,\n            last_name: lastName,\n          },\n        });\n  \n        await this.login(username, password);\n      } catch (error) {\n        return error.response;\n      }\n    }\n  \n    setToken(response) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n      return response.data;\n    }\n  \n    async refreshToken() {\n      try {\n        const user = JSON.parse(localStorage.getItem('user'));\n  \n        if (user.refresh) {\n          const response = await request({\n            url: REFRESH_ENDPOINT,\n            method: 'POST',\n            data: {\n              refresh: user.refresh,\n            },\n          });\n  \n          return response.data;\n        }\n      } catch (error) {\n        return error.response;\n      }\n    }\n  }\n  \n  export default new AuthService();\n  "],"mappings":"AAAA,SACIA,cAAc,EACdC,gBAAgB,EAChBC,iBAAiB,QACZ,kBAAkB;AAEzB,OAAOC,OAAO,MAAM,eAAe;AAEnC,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC;EACpC;EAEA,MAAMD,KAAKA,CAACE,QAAQ,EAAEC,QAAQ,EAAE;IAC9B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMP,OAAO,CAAC;QAC7BQ,GAAG,EAAEX,cAAc;QACnBY,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE;UACJL,QAAQ;UACRC;QACF;MACF,CAAC,CAAC;MAEF,IAAIC,QAAQ,CAACG,IAAI,CAACC,MAAM,EAAE;QACxB,OAAO,IAAI,CAACC,QAAQ,CAACL,QAAQ,CAAC;MAChC;IACF,CAAC,CAAC,OAAOM,KAAK,EAAE;MACd,OAAOA,KAAK,CAACN,QAAQ;IACvB;EACF;EAEAO,MAAMA,CAAA,EAAG;IACPC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;EACjC;EAEA,MAAMC,QAAQA,CAAC;IACbZ,QAAQ;IACRa,KAAK;IACLZ,QAAQ;IACRa,SAAS;IACTC;EACF,CAAC,EAAE;IACD,IAAI;MACF,MAAMpB,OAAO,CAAC;QACZQ,GAAG,EAAET,iBAAiB;QACtBU,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE;UACJL,QAAQ;UACRa,KAAK;UACLZ,QAAQ;UACRe,UAAU,EAAEF,SAAS;UACrBG,SAAS,EAAEF;QACb;MACF,CAAC,CAAC;MAEF,MAAM,IAAI,CAACjB,KAAK,CAACE,QAAQ,EAAEC,QAAQ,CAAC;IACtC,CAAC,CAAC,OAAOO,KAAK,EAAE;MACd,OAAOA,KAAK,CAACN,QAAQ;IACvB;EACF;EAEAK,QAAQA,CAACL,QAAQ,EAAE;IACjBQ,YAAY,CAACQ,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAClB,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC3D,OAAOH,QAAQ,CAACG,IAAI;EACtB;EAEA,MAAMgB,YAAYA,CAAA,EAAG;IACnB,IAAI;MACF,MAAMC,IAAI,GAAGH,IAAI,CAACI,KAAK,CAACb,YAAY,CAACc,OAAO,CAAC,MAAM,CAAC,CAAC;MAErD,IAAIF,IAAI,CAACG,OAAO,EAAE;QAChB,MAAMvB,QAAQ,GAAG,MAAMP,OAAO,CAAC;UAC7BQ,GAAG,EAAEV,gBAAgB;UACrBW,MAAM,EAAE,MAAM;UACdC,IAAI,EAAE;YACJoB,OAAO,EAAEH,IAAI,CAACG;UAChB;QACF,CAAC,CAAC;QAEF,OAAOvB,QAAQ,CAACG,IAAI;MACtB;IACF,CAAC,CAAC,OAAOG,KAAK,EAAE;MACd,OAAOA,KAAK,CAACN,QAAQ;IACvB;EACF;AACF;AAEA,eAAe,IAAIN,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}