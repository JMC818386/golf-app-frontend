{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"bootstrap/dist/css/bootstrap.css\";import{Outlet,useNavigate}from\"react-router-dom\";import\"./Round.css\";import{API_URL}from\"../../services/auth.constants\";import request from\"../../services/api.request\";import{useGlobalState}from\"../../context/GlobalState\";import NavBar from\"../NavBar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RoundSetup(){let navigate=useNavigate();const[courses,setCourses]=useState([]);const[selectedCourse,setSelectedCourse]=useState(null);const[searchValue,setSearchValue]=useState(\"\");const[state]=useGlobalState();useEffect(()=>{if(!state.currentUser){navigate(\"/login\");}const getCourses=async()=>{let config={url:\"/courses/\",baseURL:API_URL,method:\"get\"};let response=await axios.request(config);setCourses(response.data);};getCourses();},[]);const handleCourseClick=course=>{setSelectedCourse(course);};const handleSearchChange=event=>{setSearchValue(event.target.value);};// POST new Round to database and then, save the round ID to state.\nconst newRound=async(course,round_length,total_score)=>{let config={url:\"/rounds/\",method:\"post\",data:{course,round_length,total_score}};let response=await request(config);navigate(\"/round/\".concat(response.data.id,\"/\").concat(response.data.course));// setCurrentRound(response.data);\n// currentRoundRef.current = response.data;\n};const filteredCourses=courses.filter(course=>course.name.toLowerCase().includes(searchValue.toLowerCase()));// const [currentRound, setCurrentRound] = useState(null);\n// const currentRoundRef = useRef(null);\n// useEffect(() => {\n//   if (currentRoundRef.current) {\n//     setCurrentRound(currentRoundRef.current);\n//   }\n// }, [currentRoundRef.current]);\n// console.log(currentRound);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center vh-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mb-4 text-light\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Select a Course\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search Courses\",value:searchValue,className:\"border-0 p-1\",onChange:handleSearchChange}),/*#__PURE__*/_jsx(\"div\",{className:\"containter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col names mb-5 d-flex flex-column justify-content-center\",children:filteredCourses.map(course=>/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-2 sqr-btn2\",onClick:()=>handleCourseClick(course.id),children:course.name},course.id))})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>newRound(selectedCourse,18,0),className:\"m-1 p-3 sqr-btn1\",disabled:!selectedCourse,children:\"BEGIN ROUND\"})})})})]})})})})]});}export default RoundSetup;","map":{"version":3,"names":["React","useState","useEffect","axios","Outlet","useNavigate","API_URL","request","useGlobalState","NavBar","jsx","_jsx","jsxs","_jsxs","RoundSetup","navigate","courses","setCourses","selectedCourse","setSelectedCourse","searchValue","setSearchValue","state","currentUser","getCourses","config","url","baseURL","method","response","data","handleCourseClick","course","handleSearchChange","event","target","value","newRound","round_length","total_score","concat","id","filteredCourses","filter","name","toLowerCase","includes","className","children","type","placeholder","onChange","map","onClick","disabled"],"sources":["/workspace/golf-app-frontend/frontend/src/components/round/RoundSetup.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport { Outlet, useNavigate } from \"react-router-dom\";\nimport \"./Round.css\";\nimport { API_URL } from \"../../services/auth.constants\";\nimport request from \"../../services/api.request\";\nimport { useGlobalState } from \"../../context/GlobalState\";\nimport NavBar from \"../NavBar\";\n\nfunction RoundSetup() {\n  let navigate = useNavigate();\n  const [courses, setCourses] = useState([]);\n  const [selectedCourse, setSelectedCourse] = useState(null);\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [state] = useGlobalState();\n\n  useEffect(() => {\n    if (!state.currentUser) {\n      navigate(\"/login\");\n    }\n\n    const getCourses = async () => {\n      let config = {\n        url: \"/courses/\",\n        baseURL: API_URL,\n        method: \"get\",\n      };\n      let response = await axios.request(config);\n      setCourses(response.data);\n    };\n\n    getCourses();\n  }, []);\n\n  const handleCourseClick = (course) => {\n    setSelectedCourse(course);\n  };\n\n  const handleSearchChange = (event) => {\n    setSearchValue(event.target.value);\n  };\n\n  // POST new Round to database and then, save the round ID to state.\n  const newRound = async (course, round_length, total_score) => {\n    let config = {\n      url: `/rounds/`,\n      method: \"post\",\n      data: {\n        course,\n        round_length,\n        total_score,\n      },\n    };\n    let response = await request(config);\n    navigate(`/round/${response.data.id}/${response.data.course}`);\n    // setCurrentRound(response.data);\n    // currentRoundRef.current = response.data;\n  };\n\n  const filteredCourses = courses.filter((course) =>\n    course.name.toLowerCase().includes(searchValue.toLowerCase())\n  );\n\n  // const [currentRound, setCurrentRound] = useState(null);\n  // const currentRoundRef = useRef(null);\n\n  // useEffect(() => {\n  //   if (currentRoundRef.current) {\n  //     setCurrentRound(currentRoundRef.current);\n  //   }\n  // }, [currentRoundRef.current]);\n\n  // console.log(currentRound);\n\n  return (\n\n    <div className=\"background\">\n      <NavBar />\n      <Outlet />\n      <div className=\"container d-flex justify-content-center vh-100\">\n        <div className=\"row\">\n          <div className=\"col mt-5\">\n            <div className=\"d-flex flex-column justify-content-center\">\n              <div className=\"d-flex justify-content-center mb-4 text-light\">\n                <h1>Select a Course</h1>\n              </div>\n              <input\n                type=\"text\"\n                placeholder=\"Search Courses\"\n                value={searchValue}\n                className=\"border-0 p-1\"\n                onChange={handleSearchChange}\n              />\n              <div className=\"containter\">\n                <div className=\"row\">\n                  <div className=\"col names mb-5 d-flex flex-column justify-content-center\">\n                    {filteredCourses.map((course) => (\n                      <button\n                        className=\"px-3 py-2 sqr-btn2\"\n                        key={course.id}\n                        onClick={() => handleCourseClick(course.id)}\n                      >\n                        {course.name}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n              <div className=\"container d-flex justify-content-center\">\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <button\n                      onClick={() => newRound(selectedCourse, 18, 0)}\n                      className=\"m-1 p-3 sqr-btn1\"\n                      disabled={!selectedCourse}\n                    >\n                      BEGIN ROUND\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n  );\n}\n\nexport default RoundSetup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}